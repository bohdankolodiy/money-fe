import{b as U,i as b}from"./chunk-YFDP4B6D.js";import{d as x,q as C}from"./chunk-X547BOUD.js";import{La as I,Y as k,aa as m,d as l,e as g,fa as u}from"./chunk-LPLFSVI5.js";var v=(()=>{let o=class o{constructor(t,e){this.document=t,this.platformId=e,this.documentIsAccessible=C(this.platformId)}static getCookieRegExp(t){let e=t.replace(/([\[\]{}()|=;+?,.*^$])/gi,"\\$1");return new RegExp("(?:^"+e+"|;\\s*"+e+")=(.*?)(?:;|$)","g")}static safeDecodeURIComponent(t){try{return decodeURIComponent(t)}catch{return t}}check(t){return this.documentIsAccessible?(t=encodeURIComponent(t),o.getCookieRegExp(t).test(this.document.cookie)):!1}get(t){if(this.documentIsAccessible&&this.check(t)){t=encodeURIComponent(t);let i=o.getCookieRegExp(t).exec(this.document.cookie);return i[1]?o.safeDecodeURIComponent(i[1]):""}else return""}getAll(){if(!this.documentIsAccessible)return{};let t={},e=this.document;return e.cookie&&e.cookie!==""&&e.cookie.split(";").forEach(i=>{let[c,r]=i.split("=");t[o.safeDecodeURIComponent(c.replace(/^ /,""))]=o.safeDecodeURIComponent(r)}),t}set(t,e,i,c,r,f,h,D){if(!this.documentIsAccessible)return;if(typeof i=="number"||i instanceof Date||c||r||f||h){let d={expires:i,path:c,domain:r,secure:f,sameSite:h||"Lax",partitioned:D};this.set(t,e,d);return}let n=encodeURIComponent(t)+"="+encodeURIComponent(e)+";",s=i||{};if(s.expires)if(typeof s.expires=="number"){let d=new Date(new Date().getTime()+s.expires*1e3*60*60*24);n+="expires="+d.toUTCString()+";"}else n+="expires="+s.expires.toUTCString()+";";s.path&&(n+="path="+s.path+";"),s.domain&&(n+="domain="+s.domain+";"),s.secure===!1&&s.sameSite==="None"&&(s.secure=!0,console.warn(`[ngx-cookie-service] Cookie ${t} was forced with secure flag because sameSite=None.More details : https://github.com/stevermeister/ngx-cookie-service/issues/86#issuecomment-597720130`)),s.secure&&(n+="secure;"),s.sameSite||(s.sameSite="Lax"),n+="sameSite="+s.sameSite+";",s.partitioned&&(n+="Partitioned;"),this.document.cookie=n}delete(t,e,i,c,r="Lax"){if(!this.documentIsAccessible)return;let f=new Date("Thu, 01 Jan 1970 00:00:01 GMT");this.set(t,"",{expires:f,path:e,domain:i,secure:c,sameSite:r})}deleteAll(t,e,i,c="Lax"){if(!this.documentIsAccessible)return;let r=this.getAll();for(let f in r)r.hasOwnProperty(f)&&this.delete(f,t,e,i,c)}};o.\u0275fac=function(e){return new(e||o)(u(x),u(I))},o.\u0275prov=m({token:o,factory:o.\u0275fac,providedIn:"root"});let a=o;return a})();var M=(()=>{var o;let p=class p{constructor(e,i){g(this,o,b.API+"/api/v1/");this.http=e,this.cookieService=i}getUser(){return this.http.get(`${l(this,o)}user`).pipe(k(e=>{this.setUserCookie(e)}))}getUsersForChat(){return this.http.get(`${l(this,o)}user/forChat`)}setUserCookie(e){this.cookieService.set("user",JSON.stringify(e))}getCookieUser(){let e=this.cookieService.get("user");return e?JSON.parse(e):""}};o=new WeakMap,p.\u0275fac=function(i){return new(i||p)(u(U),u(v))},p.\u0275prov=m({token:p,factory:p.\u0275fac,providedIn:"root"});let a=p;return a})();export{v as a,M as b};
